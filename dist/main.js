(()=>{"use strict";const e={events:{},on:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},off:function(e,t){if(this.events[e])for(var o=0;o<this.events[e].length;o++)if(this.events[e][o]===t){this.events[e].splice(o,1);break}},emit:function(e,t){this.events[e]&&this.events[e].forEach((function(e){e(t)}))}},t={projects:JSON.parse(localStorage.getItem("PROJECT_LIST"))||[{id:"1607733948510",title:"Home",list:[{id:"1607733980333",title:"Wash the dishes",description:"- Make sure to clean the sink as well.",priority:"medium",status:"not completed",date:"2020-12-13"},{id:"1607734124419",title:"Cook Dinner",description:"- Cook some spaghetti and have ice cream for dessert.",priority:"high",status:"not completed",date:"2020-12-18"},{id:"1607734270787",title:"Clean Bedroom",description:"- Make sure wife won't see the bedroom dirty",priority:"low",status:"not completed",date:"2020-12-14"},{id:"1607734306649",title:"Watch Netflix",description:"- Watch favorite show",priority:"low",status:"completed",date:"2020-12-18"}]},{id:"1607733958046",title:"Work",list:[{id:"1607734350200",title:"Attend meeting",description:"Meeting starts at 9:00 AM",priority:"high",status:"not completed",date:"2020-12-21"},{id:"1607734398949",title:"Project",description:"Work on company project",priority:"high",status:"not completed",date:"2020-12-16"},{id:"1607734464136",title:"Other task",description:"Finish remaining tasks",priority:"medium",status:"not completed",date:"2020-12-16"}]},{id:"1607733964510",title:"Play",list:[{id:"1607734495269",title:"Play Chess",description:"- Keep practicing!",priority:"low",status:"not completed",date:"2020-12-25"},{id:"1607734517748",title:"Play CSGO",description:"- Grind to level up",priority:"low",status:"not completed",date:"2020-12-25"},{id:"1607734554297",title:"Buy Cyberpunk",description:"",priority:"low",status:"completed",date:"2020-12-25"}]}],selectedProjID:localStorage.getItem("SELECTED_PROJ_ID")||"null",save(){localStorage.setItem("PROJECT_LIST",JSON.stringify(this.projects)),localStorage.setItem("SELECTED_PROJ_ID",this.selectedProjID)},clear(){localStorage.clear()}};e.on("createdProject",t.save.bind(t)),e.on("selectedProject",t.save.bind(t)),e.on("deletedProject",t.save.bind(t)),e.on("createdTodo",t.save.bind(t)),e.on("deletedTodo",t.save.bind(t)),e.on("updateTodoDetails",t.save.bind(t)),e.on("updateProjectTitle",t.save.bind(t)),e.on("initialize",t.save.bind(t));const o=(()=>{const o=document.querySelector(".project-list"),i=document.querySelector(".project-details");function d(){!function(){if(o.firstChild)for(;o.firstChild;)o.removeChild(o.firstChild)}(),0===t.projects.length&&t.clear(),t.projects.forEach((e=>{const i=document.createElement("DIV"),d=document.createElement("LI"),s=document.createElement("BUTTON");i.classList.add("project-item"),i.setAttribute("id",e.id),d.classList.add("project-name"),s.classList.add("project-delete-btn"),s.setAttribute("data-job","delete"),d.textContent=e.title,s.textContent="⨉",i.append(d),i.append(s),i.id===t.selectedProjID&&i.classList.add("selected"),o.append(i)})),t.selectedProjID&&"null"!==t.selectedProjID?i.classList.remove("hide"):i.classList.add("hide")}return e.on("createdProject",d),e.on("selectedProject",d),e.on("deletedProject",d),e.on("updateProjectTitle",d),{createProject:function(){t.projects.push(((e,t,o=[])=>({id:Date.now().toString(),title:"(New Project)",list:o}))()),e.emit("createdProject",t.projects)},setSelectedProject:function(o){t.selectedProjID=o.id,e.emit("selectedProject",t.selectedProjID)},deleteProject:function(o){t.projects=t.projects.filter((e=>e.id!==o)),t.selectedProjID===o&&(t.selectedProjID=null),e.emit("deletedProject",t.projects)},init:function(){d(),e.emit("initialize")}}})(),i=(()=>{const o=document.querySelector(".project-title"),i=document.querySelector(".todo-list"),d=document.querySelector(".todo-details"),s=document.querySelector(".todo-overlay"),c=document.querySelector(".priority"),r=document.querySelector(".status"),l=document.querySelector(".todo-modal-title"),n=document.querySelector(".todo-modal-description"),a=document.querySelector(".todo-modal-due-date");let u,p;function m(){u=t.projects.find((e=>e.id===t.selectedProjID)),o.value=u.title}function j(){!function(){if(i.firstChild)for(;i.firstChild;)i.removeChild(i.firstChild)}(),u.list.forEach((e=>{const t=document.createElement("div"),o=document.createElement("li"),d=document.createElement("p"),s=document.createElement("p"),c=document.createElement("button");t.classList.add("todo-item"),t.setAttribute("id",e.id),o.classList.add("todo-info"),d.classList.add("todo-title"),s.classList.add("todo-due-date"),c.classList.add("todo-delete-btn"),d.textContent=e.title,s.textContent=e.date,c.textContent="⨉",c.setAttribute("data-job","delete"),o.append(d,s),t.append(o,c),i.append(t),"low"===e.priority&&o.classList.add("low-prio"),"medium"===e.priority&&o.classList.add("mid-prio"),"high"===e.priority&&o.classList.add("high-prio"),"completed"===e.status&&o.classList.add("completed")}))}function h(){"null"!==t.selectedProjID&&(m(),j())}return e.on("selectedProject",m),e.on("selectedProject",j),e.on("createdTodo",j),e.on("deletedTodo",j),e.on("updateTodoDetails",j),e.on("initialize",h),{createTodo:function(){u.list.push({id:Date.now().toString(),title:"(New Todo)",description:"",priority:"none",status:"none",date:"dd/mm/yyyy"}),e.emit("createdTodo",u)},deleteTodo:function(t){u.list=u.list.filter((e=>e.id!==t)),e.emit("deletedTodo",u.list)},displayTodoDetails:function(e){d.classList.remove("hide"),s.classList.remove("hide"),p=u.list.find((t=>t.id===e)),c.value=p.priority,r.value=p.status,l.value=p.title,n.value=p.description,a.value=p.date},updateTodoDetails:function(t){c.value&&r.value&&a.value&&(t.preventDefault(),d.classList.add("hide"),s.classList.add("hide"),p.priority=c.value,p.status=r.value,p.title=l.value,p.description=n.value,p.date=a.value,e.emit("updateTodoDetails",p))},updateProjectTitle:function(){u.title=o.value,e.emit("updateProjectTitle",u)},init:h}})();document.addEventListener("DOMContentLoaded",(()=>{o.init(),i.init()}));const d=document.querySelector(".add-project-btn"),s=document.querySelector(".project-list"),c=document.querySelector(".add-todo-btn"),r=document.querySelector(".todo-list"),l=document.querySelector(".todo-modal-save-btn"),n=document.querySelector(".project-title");d.addEventListener("click",(()=>{o.createProject()})),s.addEventListener("click",(function(e){if("project-item"===e.target.className&&o.setSelectedProject(e.target),"delete"===e.target.dataset.job){const t=e.target.closest(".project-item").id;o.deleteProject(t)}})),c.addEventListener("click",(()=>{i.createTodo()})),r.addEventListener("click",(e=>{if("todo-item"===e.target.className){const t=e.target.closest(".todo-item").id;i.displayTodoDetails(t)}if("delete"===e.target.dataset.job){const t=e.target.closest(".todo-item").id;i.deleteTodo(t)}})),l.addEventListener("click",(e=>{i.updateTodoDetails(e)})),n.addEventListener("keyup",(function(e){13===e.keyCode&&(i.updateProjectTitle(),this.blur())}))})();